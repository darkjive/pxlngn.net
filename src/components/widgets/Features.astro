---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import ItemGrid from '~/components/ui/ItemGrid.astro';
// import Headline from '~/components/ui/Headline.astro';
import type { Features as Props } from '~/types';

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline = await Astro.slots.render('tagline'),
  items = [],
  columns = 2,

  defaultIcon,

  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;

const titleLines = title ? title.split('<br/>').filter((line) => line.trim()) : [];
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-5xl ${classes?.container ?? ''}`} bg={bg}>
  <div class="mb-8 text-center md:mx-auto md:mb-12">
    {
      tagline && (
        <p
          data-animate
          data-anim-type="fade-down"
          class="font-bold uppercase tracking-normal text-slate-900/30 dark:text-slate-300/50"
          set:html={tagline}
        />
      )
    }
    {
      titleLines.length > 0 ? (
        <h2 class="Anklepants leading-tighter text-heading text-center font-heading text-4xl tracking-tighter lg:text-5xl">
          {titleLines.map((line, index) => (
            <span
              data-animate
              data-anim-type={index % 2 === 0 ? 'fade-left' : 'fade-right'}
              data-anim-delay={index * 150}
              set:html={line}
              class="block"
            />
          ))}
        </h2>
      ) : (
        title && (
          <h2
            data-animate
            data-anim-type="fade-up"
            class="Anklepants leading-tighter text-heading text-center font-heading text-4xl tracking-tighter lg:text-5xl"
            set:html={title}
          />
        )
      )
    }
    {subtitle && <p data-animate data-anim-type="typewriter" class="mt-4 text-xl text-muted" set:html={subtitle} />}
  </div>

  <ItemGrid
    items={items}
    columns={columns}
    defaultIcon={defaultIcon}
    classes={{
      container: '',
      title: 'md:text-[1.3rem]',
      icon: 'text-white bg-primary rounded-full w-10 h-10 p-2 mr-4 rtl:ml-4 rtl:mr-0',
      ...((classes?.items as Record<string, never>) ?? {}),
    }}
  />
</WidgetWrapper>
