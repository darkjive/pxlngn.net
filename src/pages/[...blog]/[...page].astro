---
import type { InferGetStaticPropsType, GetStaticPaths } from 'astro';

import Layout from '~/layouts/PageLayout.astro';
import BlogList from '~/components/blog/List.astro';
import Headline from '~/components/blog/Headline.astro';
import Pagination from '~/components/blog/Pagination.astro';

import { blogListRobots, getStaticPathsBlogList } from '~/utils/blog';

export const prerender = true;

export const getStaticPaths = (async ({ paginate }) => {
  return await getStaticPathsBlogList({ paginate });
}) satisfies GetStaticPaths;

type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const { page } = Astro.props as Props;
const currentPage = page.currentPage ?? 1;

const metadata = {
  title: `pxlngn | Blog${currentPage > 1 ? ` - Seite ${currentPage}` : ''}`,
  robots: {
    index: blogListRobots?.index && currentPage === 1,
    follow: blogListRobots?.follow,
  },
  openGraph: {
    type: 'blog',
  },
};
---

<Layout metadata={metadata}>
  <section class="mx-auto max-w-4xl px-6 py-12 sm:px-6 sm:py-16 lg:py-20">
    <p class="text-center font-bold uppercase tracking-normal text-slate-900/30 dark:text-slate-300/50">Blog</p>
    <Headline
      subtitle="Hier findest du meine Gedanken rund um Webentwicklung, Design, Projektmanagement und Testing. Es geht mir nicht darum, eine perfekte Anleitung oder universelle Wahrheiten weiterzugeben. Vielmehr spiegelt sich in diesen Texten meine persÃ¶nliche Erfahrung und meine Art, Herausforderungen anzugehen."
    >
      Einblicke in meine Ideen und Interessen!
    </Headline>
    <BlogList posts={page.data} />
    <Pagination prevUrl={page.url.prev} nextUrl={page.url.next} />
    
  </section>
</Layout>
